<?php
 $title = 'HR Reports';
 $this->headTitle($title);

 $organisation_list = array();
 foreach($this->organisationList as $key=>$organisation){
	$organisation_list[$key] = $organisation;
 }
 $study_level = array();
 foreach($this->studyLevel as $k=>$level){
	 if(!preg_match('/Class/', $level)){
		 $study_level[$k] = $level;
	 }
 }

 ?>

<div class="right_col" role="main">
    <div class=" ">
        <div class="col-md-12 col-sm-12 col-xs-12">
				<!-- Start of table listing of HR Report -->
                <div class="x_panel">
                  <div class="x_title">
                    <hr>
                    <h2><center><u><?php echo $this->escapeHtml($title); ?></u></center></h2>
                    <div class="clearfix"></div>
                  </div>
                  <hr>
                  <h4><?php echo $this->escapeHtml('Regular'); ?></h4>
                  <br />
                  <div class="x_content">
                      <table class="table table-striped table-bordered" border="1px" width="100%" cellpadding="1" cellspacing="1">
                        <tr>                        
                             <td style="width:15%" class="column-title">Organisation</td>
							 <?php foreach($study_level as $key => $level): ?>
                             <td style="width:8%" class="column-title"><?php echo $level;?></td>
                             <?php endforeach; ?>
                        </tr>
                        <tbody>
                          <?php $i =1; foreach($this->hr_report as $report) : ?>
                          <tr class="even pointer">
                            <td style="width:15%" align="center"><?php echo $organisation_list[$i];?></td>
                            <?php foreach($study_level as $key => $level): ?>
                            <td style="width:8%" align="center"><?php 
                                if(array_key_exists($i, $this->hr_report)){
                                    if(array_key_exists($key, $this->hr_report[$i]['Regular']))
                                         echo count($this->hr_report[$i]['Regular'][$key]);
									else
                                         echo $this->escapeHtml('0');
                                }
                                 else
                                    echo $this->escapeHtml(0);									
                                ?></td>
                             <?php endforeach; ?>
                          </tr>
                          <?php $i++; endforeach; ?>
                        </tbody>
                      </table>
                     <br/>
                     <hr>
                     <h4><?php echo $this->escapeHtml('Contract'); ?></h4>
                  <br />
                  <div class="x_content">
                      <table class="table table-striped table-bordered" border="1px" width="100%" cellpadding="1" cellspacing="1">
                        <tr>                        
                             <td style="width:15%" class="column-title">Organisation</td>
							 <?php foreach($study_level as $key => $level): ?>
                             <td style="width:8%" class="column-title"><?php echo $level;?></td>
                             <?php endforeach; ?>
                        </tr>
                        <tbody>
                          <?php $i =1; foreach($this->hr_report as $report) : ?>
                          <tr class="even pointer">
                            <td style="width:15%" align="center"><?php echo $organisation_list[$i];?></td>
                            <?php foreach($study_level as $key => $level): ?>
                            <td style="width:8%" align="center"><?php 
                                if(array_key_exists($i, $this->hr_report)){
                                    if(array_key_exists('Contract', $this->hr_report[$i])){
										if(array_key_exists($key, $this->hr_report[$i]['Contract']))
											 echo count($this->hr_report[$i]['Contract'][$key]);
										else
											 echo $this->escapeHtml('0');
									} else
										echo $this->escapeHtml(0);	
                                }
                                 else
                                    echo $this->escapeHtml(0);									
                                ?></td>
                             <?php endforeach; ?>
                          </tr>
                          <?php $i++; endforeach; ?>
                        </tbody>
                      </table>
                     <br/>
                 </div>               
             </div>
        </div> 
    </div>
</div>


