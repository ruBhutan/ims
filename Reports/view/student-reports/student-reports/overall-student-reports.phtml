<?php
		
	// Add a JavaScript file
	$this->headScript()->appendFile('js/rub-ajax/ajax.js', 'text/javascript');
        
 $title = 'Student Report';
 $this->headTitle($title);
 $organisation_list = array();
 foreach($this->organisationList as $key=>$organisation){
	if($key != 1){
		$organisation_list[$key] = $organisation;
	}
 }

?>

 <div class="right_col" role="main">
          <div class="">
              <div class="col-md-12 col-sm-12 col-xs-12">
            
                <div class="x_panel">
                <div class="x_title">
                    <h2><?php echo $this->escapeHtml($title); ?></h2>
                     <div class="clearfix"></div>
                    </div>
                	
                        <!-- Search Employees-->
                        <div class="col-md-12 col-xs-12">
                          <div class="x_panel">
                            <div class="x_title">
                              <h2><?php echo $this->escapeHtml("Report")?></h2>
                                <ul class="nav navbar-right panel_toolbox">
                                  <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                                </ul>
                             <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                               <?php
                                // Opening of the form tag
                                $form->prepare();
                                echo $this->form()->openTag($form);
                                $form->get('report_name')->setValueOptions($this->report_list);
                                $form->get('organisation')->setValueOptions($this->organisationList);
                                 $form->get('year')->setValue(date('Y-m-d'));
                                echo $this->formHidden($form->get('year'));
                              ?>
                            
                              <div class="row">
                                  <div class="col-md-6 col-sm-12 col-xs-12 form-group">
                                    <label>Report Type</label>
                                    <?php echo $this->formRow($form->get('report_name')); ?>
                                  </div>
                                  <div class="col-md-6 col-sm-12 col-xs-12 form-group">
                                    <label>College</label>
                                    <?php echo $this->formRow($form->get('organisation')); ?>
                                  </div>
                               </div>
                             
                             <div class="row">
                                <div class="ln_solid"></div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12"></label>
                                      <?php
                                       echo $this->formHidden($form->get('csrf'));
                                       echo $this->formSubmit($form->get('submit')); 
                                       echo $this->form()->closeTag(); 
                                    ?>
                                </div>
                            </div>
                          </div>
                        </div>
                       </div>     
                          
                        <?php 
                                if(!empty($this->report_details) && $this->report_details['report_name'] == 'currently_student_by_programme_incampus'){
                                        echo $this->partial('currently_student_by_programme_incampus.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'overall_student_by_programme_inrub'){
                                        echo $this->partial('overall_student_by_programme_inrub.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 

                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'currently_student_by_programme_offcampus'){
                                        echo $this->partial('currently_student_by_programme_offcampus.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'currently_suspended_students'){
                                        echo $this->partial('currently_suspended_students.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'overall_terminated_students'){
                                        echo $this->partial('overall_terminated_students.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'overall_withdrawn_students'){
                                        echo $this->partial('overall_withdrawn_students.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'student_by_dzongkhag'){
                                        echo $this->partial('student_by_dzongkhag.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'student_by_nationality'){
                                        echo $this->partial('student_by_nationality.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                } else if(!empty($this->report_details) && $this->report_details['report_name'] == 'student_by_religion'){
                                        echo $this->partial('student_by_religion.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                }  else if(!empty($this->report_details) && $this->report_details['report_name'] == 'student_by_gender'){
                                        echo $this->partial('student_by_gender.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
                                }  else if(!empty($this->report_details) && $this->report_details['report_name'] == 'student_by_bloodgroup'){
                                        echo $this->partial('student_by_blood_group.phtml', 
                                                                array( 
                                                                    'student_report' => $this->student_report, 
                                                                    'organisation_list' => $organisation_list)); 
				}
				       else if(!empty($this->report_details) && $this->report_details['report_name'] == 'student_by_overall'){
                                            echo $this->partial('student_by_overall.phtml',
                                                          array(
                                                              'student_report' => $this->student_report,
                                                              'organisation_list' => $organisation_list,
                                                              'programmes'=>$programmes,
                                                              'scholarships' => $scholarships,
                                                              'gender' => $gender,
                                                              'maxyear' => $maxyear
                                                            ));
                                 }
                        ?>
                  </div>
                </div>
              </div>
            </div>
           </div>
     </div>
